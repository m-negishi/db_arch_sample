パーティションの種類について

|パーティション名|分割方法|詳細|
|:------------:|------|---|
|レンジ|データを期間、範囲で分割|売上データなど時系列にデータが生成されていて、決められた期間を条件としてアクセスされる場合に有効|
|リスト|任意の値リストを指定することでデータを分割|国や地域など、不連続な値を持つデータの集合を自然な方法でグループ化し、任意のパーティションに格納する場合に有効|
|ハッシュ|ハッシュ関数を使用し、データを均一に分割|レンジ、リスト化できない不連続なデータを均一に分割する場合に有効。各パーティションが均等に分割される。パーティション数を2の累乗で定義する必要がある。|

* レンジ
  * ある列をキーにしてその値の範囲で分割する。順序を持ったデータにしか適用できない。


* リスト
  * レンジと同じで特定のキーの値を使って分割する。違いは、離散的なキーに使用されること。(都道府県や顧客コードなど)


* 上記の２つを利用するときの注意
  * 方針1  
    各パーティションに含まれるレコード数が同じくらいになるキーを選ぶ。
    * そうでないとキーによってI/O量が大きく変わってしまい、性能が安定しない。
  * SQL上で選択条件/結合条件に利用されているキーを選ぶ。
    * せっかくパーティションでデータを区切っても、SQL文で利用されなければ意味が無い
  * 値があまり変更されないキーを使う。
    * キー値が変更されると、パーティション間のレコード移動が発生する。それ自身も性能問題を起こすが、パーティション間のレコード件数の分布(ヒストグラム)も崩れてしまう。


* ハッシュ
  * パーティションキーを使った範囲検索では意味がない。あくまで一意検索でしか効力を発揮しない
